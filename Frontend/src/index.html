<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>RAGPT Chatbot</title>
    <link rel="stylesheet" href="index.css" />
    <!-- Markdown Support -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <div id="theme-background"></div>
    <div id="app">
      <!-- SIDEBAR: Contains document status and chat history -->
      <aside id="sidebar">
        <button id="sidebar-toggle" title="Toggle Sidebar">
          <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M21,3H3C1.9,3 1,3.9 1,5V19C1,20.1 1.9,21 3,21H21C22.1,21 23,20.1 23,19V5C23,3.9 22.1,3 21,3M12,19H3V5H12V19Z"/></svg>
        </button>
        <div class="sidebar-header">
          <h2>RAGPT</h2>
          <button id="new-chat-btn">+ New Chat</button>
        </div>
        <div class="sidebar-scroll-container">
          <!-- Historical Chat Sessions -->
          <div class="sidebar-section" id="history-section">
            <div class="search-container">
              <svg viewBox="0 0 24 24" width="16" height="16" class="search-icon"><path fill="currentColor" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg>
              <input type="text" id="chat-search" placeholder="Search chats..." />
            </div>
            <h3>History</h3>
            <ul id="chat-history">
              <li>Initial Session</li>
            </ul>
          </div>
          <!-- Indexed Documents List -->
          <div class="sidebar-section" id="documents-section">
            <h3>Documents</h3>
            <ul id="document-list">
              <li>No documents uploaded</li>
            </ul>
          </div>
        </div>
        <div class="sidebar-footer">
          <div class="settings-dropdown">
            <button id="settings-btn" title="Settings">
              <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.35 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.97 19.05,5.05L16.56,6.05C16.04,5.65 15.47,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.53,5.32 7.96,5.65 7.44,6.05L4.95,5.05C4.73,4.97 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.35 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.95C7.96,18.35 8.53,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.47,18.68 16.04,18.35 16.56,17.95L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/></svg>
              <span>Settings</span>
            </button>
            <div id="settings-menu" class="dropdown-content">
              <div class="dropdown-section">
                <h4>Appearance</h4>
                <button class="appearance-item" data-theme="light">
                  <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,4.39L12,6.78L9.61,4.39L12,2M5.64,7.05L7.05,5.64L8.46,7.05L7.05,8.46L5.64,7.05M21.5,12L19.11,14.39L16.72,12L19.11,9.61L21.5,12M18.36,19.05L16.95,20.46L15.54,19.05L16.95,17.64L18.36,19.05M12,22L9.61,19.61L12,17.22L14.39,19.61L12,22M5.64,16.95L7.05,18.36L5.64,19.77L4.23,18.36L5.64,16.95M2,12L4.39,9.61L6.78,12L4.39,14.39L2,12M7.05,15.54L8.46,16.95L7.05,18.36L5.64,16.95L7.05,15.54Z"/></svg>
                  <span>Light Mode</span>
                </button>
                <button class="appearance-item" data-theme="dark">
                  <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4.09L13.5,1L14.56,4.09L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,11L18.5,9L19.19,11L21.25,11M18.97,15.91C19.5,17.09 19.5,18.47 19,19.69C17.96,22.03 15.44,23.5 12.9,23.5C10.22,23.5 7.8,21.86 6.73,19.4C5.67,16.95 6.15,14.11 7.91,12.14C8.74,11.2 9.8,10.45 10.97,10.03C11.33,9.9 11.7,9.79 12.08,9.72C11.16,10.61 10.6,11.83 10.6,13.17C10.6,15.93 12.84,18.17 15.6,18.17C16.55,18.17 17.43,17.9 18.17,17.43C18.41,16.95 18.7,16.44 18.97,15.91Z"/></svg>
                  <span>Dark Mode</span>
                </button>
                <button class="appearance-item" data-theme="custom">
                  <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"/></svg>
                  <span>Custom Image</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- MAIN CONTENT: The active chat interface -->
      <main id="main-content">
        <div id="chat-container">
          <!-- Bot and User bubbles will be dynamically injected here -->
          <div class="message bot-message">
            <div class="message-content">Hello! I'm your RAG assistant. Ask me anything about your documents.</div>
          </div>
        </div>

        <button id="scroll-down-btn" class="scroll-down-btn" title="Scroll to bottom">
          <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/></svg>
        </button>

        <!-- INPUT AREA: Document previews and text input -->
        <div id="input-area">
          <div id="welcome-message" class="welcome-message">How can I help you today?</div>
          <div id="input-container">
            <!-- Dynamically populated when user uploads files but hasn't clicked 'send' -->
            <div id="uploaded-docs-preview" class="uploaded-docs-preview"></div>
            
            <div class="input-row">
              <!-- Upload Menu -->
              <div class="upload-dropdown">
                <button id="upload-btn" title="Upload Media">
                  <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"/></svg>
                </button>
                <div id="upload-menu" class="dropdown-content">
                  <button class="upload-item" data-type="document">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,9V3.5L18.5,9H13Z"/></svg>
                    <span>Document</span>
                  </button>
                  <button class="upload-item" data-type="video">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/></svg>
                    <span>Video</span>
                  </button>
                  <button class="upload-item" data-type="audio">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12,2A3,3 0 0,0 9,5V11A3,3 0 0,0 12,14A3,3 0 0,0 15,11V5A3,3 0 0,0 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/></svg>
                    <span>Audio</span>
                  </button>
                  <button class="upload-item" data-type="image">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"/></svg>
                    <span>Image</span>
                  </button>
                </div>
              </div>
              
              <textarea id="message-input" placeholder="Ask anything about your documents..." rows="1"></textarea>
              
              <button id="mic-btn" title="Record Speech Query">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/></svg>
              </button>

              <button id="send-button">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/></svg>
              </button>
            </div>
          </div>
          <div class="input-footer">RAGPT Chatbot can make mistakes. Verify important info.</div>
        </div>
      </main>
    </div>
    <script src="renderer.js"></script>
  </body>
</html>
